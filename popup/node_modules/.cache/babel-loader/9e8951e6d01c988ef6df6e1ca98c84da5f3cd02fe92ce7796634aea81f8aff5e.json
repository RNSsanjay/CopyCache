{"ast":null,"code":"/* global chrome */import React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const[copies,setCopies]=useState([]);const[chatMessage,setChatMessage]=useState('');const[chatHistory,setChatHistory]=useState([]);const[newCopyText,setNewCopyText]=useState('');const[isDevMode]=useState(typeof chrome==='undefined'||!chrome.storage);useEffect(()=>{// Load copies from storage\nif(typeof chrome!=='undefined'&&chrome.storage&&chrome.storage.local){chrome.storage.local.get(['copies'],result=>{if(result.copies){setCopies(result.copies);}});}else{// Fallback for development - use localStorage or mock data\nconsole.log('Chrome API not available - running in development mode');const devCopies=localStorage.getItem('devCopies');if(devCopies){setCopies(JSON.parse(devCopies));}else{// Add some sample data for development\nconst sampleCopies=['Sample copied text 1','Another piece of copied content','Development test copy'];setCopies(sampleCopies);localStorage.setItem('devCopies',JSON.stringify(sampleCopies));}}},[]);const handleAddCopy=()=>{if(!newCopyText.trim())return;const newCopies=[newCopyText,...copies].slice(0,10);// Keep only last 10\nsetCopies(newCopies);setNewCopyText('');if(isDevMode){localStorage.setItem('devCopies',JSON.stringify(newCopies));}};const handleChat=async()=>{if(!chatMessage.trim())return;const newHistory=[...chatHistory,{role:'user',content:chatMessage}];setChatHistory(newHistory);setChatMessage('');try{const response=await fetch('http://localhost:3001/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:chatMessage,copies})});const data=await response.json();setChatHistory([...newHistory,{role:'assistant',content:data.response}]);}catch(error){console.error('Chat error:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"w-[500px] h-screen p-5 bg-black text-white animate-[slideInFromRight_0.4s_ease-out] overflow-y-auto\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"CopyCache\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-3\",children:\"Copied Items\"}),copies.map((copy,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-600 p-2.5 my-1.5 rounded\",children:copy},index)),isDevMode&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCopyText,onChange:e=>setNewCopyText(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleAddCopy(),placeholder:\"Add test copy (dev mode)\",className:\"w-full p-2.5 bg-gray-700 text-white border-none rounded mb-2\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddCopy,className:\"px-3 py-1 bg-gray-500 text-white border-none rounded text-sm hover:bg-gray-400\",children:\"Add Copy\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-3\",children:\"Chat with Gemini\"}),/*#__PURE__*/_jsx(\"div\",{className:\"h-50 overflow-y-auto bg-gray-900 p-2.5 rounded mb-2.5\",children:chatHistory.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"my-1.5 p-1.5 rounded \".concat(msg.role==='user'?'bg-gray-500 text-right':'bg-gray-800'),children:msg.content},index))}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:chatMessage,onChange:e=>setChatMessage(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleChat(),placeholder:\"Ask about your copies...\",className:\"flex-1 p-2.5 bg-gray-600 text-white border-none rounded\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleChat,className:\"px-4 py-2.5 bg-gray-500 text-white border-none rounded cursor-pointer hover:bg-gray-400\",children:\"Send\"})]})]})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","App","copies","setCopies","chatMessage","setChatMessage","chatHistory","setChatHistory","newCopyText","setNewCopyText","isDevMode","chrome","storage","local","get","result","console","log","devCopies","localStorage","getItem","JSON","parse","sampleCopies","setItem","stringify","handleAddCopy","trim","newCopies","slice","handleChat","newHistory","role","content","response","fetch","method","headers","body","message","data","json","error","className","children","map","copy","index","type","value","onChange","e","target","onKeyPress","key","placeholder","onClick","msg","concat"],"sources":["D:/RNS/CopyCache/popup/src/App.js"],"sourcesContent":["/* global chrome */\r\nimport React, { useState, useEffect } from 'react';\r\n\r\nfunction App() {\r\n  const [copies, setCopies] = useState([]);\r\n  const [chatMessage, setChatMessage] = useState('');\r\n  const [chatHistory, setChatHistory] = useState([]);\r\n  const [newCopyText, setNewCopyText] = useState('');\r\n  const [isDevMode] = useState(typeof chrome === 'undefined' || !chrome.storage);\r\n\r\n  useEffect(() => {\r\n    // Load copies from storage\r\n    if (typeof chrome !== 'undefined' && chrome.storage && chrome.storage.local) {\r\n      chrome.storage.local.get(['copies'], (result) => {\r\n        if (result.copies) {\r\n          setCopies(result.copies);\r\n        }\r\n      });\r\n    } else {\r\n      // Fallback for development - use localStorage or mock data\r\n      console.log('Chrome API not available - running in development mode');\r\n      const devCopies = localStorage.getItem('devCopies');\r\n      if (devCopies) {\r\n        setCopies(JSON.parse(devCopies));\r\n      } else {\r\n        // Add some sample data for development\r\n        const sampleCopies = [\r\n          'Sample copied text 1',\r\n          'Another piece of copied content',\r\n          'Development test copy'\r\n        ];\r\n        setCopies(sampleCopies);\r\n        localStorage.setItem('devCopies', JSON.stringify(sampleCopies));\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const handleAddCopy = () => {\r\n    if (!newCopyText.trim()) return;\r\n\r\n    const newCopies = [newCopyText, ...copies].slice(0, 10); // Keep only last 10\r\n    setCopies(newCopies);\r\n    setNewCopyText('');\r\n\r\n    if (isDevMode) {\r\n      localStorage.setItem('devCopies', JSON.stringify(newCopies));\r\n    }\r\n  };\r\n\r\n  const handleChat = async () => {\r\n    if (!chatMessage.trim()) return;\r\n\r\n    const newHistory = [...chatHistory, { role: 'user', content: chatMessage }];\r\n    setChatHistory(newHistory);\r\n    setChatMessage('');\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:3001/chat', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ message: chatMessage, copies })\r\n      });\r\n      const data = await response.json();\r\n      setChatHistory([...newHistory, { role: 'assistant', content: data.response }]);\r\n    } catch (error) {\r\n      console.error('Chat error:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-[500px] h-screen p-5 bg-black text-white animate-[slideInFromRight_0.4s_ease-out] overflow-y-auto\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">CopyCache</h1>\r\n      <div className=\"mb-5\">\r\n        <h2 className=\"text-xl font-semibold mb-3\">Copied Items</h2>\r\n        {copies.map((copy, index) => (\r\n          <div key={index} className=\"bg-gray-600 p-2.5 my-1.5 rounded\">{copy}</div>\r\n        ))}\r\n        {isDevMode && (\r\n          <div className=\"mt-3\">\r\n            <input\r\n              type=\"text\"\r\n              value={newCopyText}\r\n              onChange={(e) => setNewCopyText(e.target.value)}\r\n              onKeyPress={(e) => e.key === 'Enter' && handleAddCopy()}\r\n              placeholder=\"Add test copy (dev mode)\"\r\n              className=\"w-full p-2.5 bg-gray-700 text-white border-none rounded mb-2\"\r\n            />\r\n            <button onClick={handleAddCopy} className=\"px-3 py-1 bg-gray-500 text-white border-none rounded text-sm hover:bg-gray-400\">\r\n              Add Copy\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n      <div className=\"mt-5\">\r\n        <h2 className=\"text-xl font-semibold mb-3\">Chat with Gemini</h2>\r\n        <div className=\"h-50 overflow-y-auto bg-gray-900 p-2.5 rounded mb-2.5\">\r\n          {chatHistory.map((msg, index) => (\r\n            <div key={index} className={`my-1.5 p-1.5 rounded ${msg.role === 'user' ? 'bg-gray-500 text-right' : 'bg-gray-800'}`}>\r\n              {msg.content}\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <input\r\n            type=\"text\"\r\n            value={chatMessage}\r\n            onChange={(e) => setChatMessage(e.target.value)}\r\n            onKeyPress={(e) => e.key === 'Enter' && handleChat()}\r\n            placeholder=\"Ask about your copies...\"\r\n            className=\"flex-1 p-2.5 bg-gray-600 text-white border-none rounded\"\r\n          />\r\n          <button onClick={handleChat} className=\"px-4 py-2.5 bg-gray-500 text-white border-none rounded cursor-pointer hover:bg-gray-400\">\r\n            Send\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}